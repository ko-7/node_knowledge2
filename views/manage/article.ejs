<!-- ç®¡ç†ç”»é¢ã€€è¨˜äº‹ç·¨é›†ãƒšãƒ¼ã‚¸ -->

<form method="post" action="/manage/article/<%= path %>">
  <input type="hidden" name="id" value="<%= form.id %>">
  <!-- article-header ---------------------------------------------------------->
  <div class="article-header">
    <!-- <div class="form-group">
      <label for="status">
      <input type="checkbox" name="status" id="status check" selected="<%= form.status %>">
      å…¬é–‹ã™ã‚‹</label>
    </div> -->
    <div class="form-group">
      <p>â—†ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</p>
      <select name="status">
        <option value="draft">Draft...âœ‹</option>
        <option value="release" id="status_release">ReleaseğŸ‘</option>
      </select>
    </div>
    <div class="form-group date">
      <label for="date">â—†ä½œæˆãƒ»ç·¨é›†æ—¥æ™‚</label>
      <input type="text" name="date" id="date" value="<%= form.date %>">
    </div>
    <div class="form-group date">
      <label for="genre">â—†ã‚¸ãƒ£ãƒ³ãƒ«</label>
      <input type="text" name="genre" id="genre" value="<%= form.genre %>">
    </div>
    <div class="form-group">
      <label for="title">â—†è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«</label>
      <h1 class="article-header-title">
        <input type="text" name="title" id="title" value="<%= form.title %>">
      </h1>
    </div>
    <div class="form-group">
      <label for="headerimg">â—†ãƒ˜ãƒƒãƒ€ãƒ¼ç”»åƒURL</label>
      <input type="text" name="headerimg" id="headerimg" value="<%= form.headerimg %>">
    </div>
    <div class="form-group">
      <label for="headerimgsource">â—†ãƒ˜ãƒƒãƒ€ãƒ¼ç”»åƒã®å‡ºå…¸</label>
      <input type="text" name="headerimgsource" id="headerimgsource" value="<%= form.headerimgsource %>">
    </div>
  </div>

  <!-- article-content -->
  <div class="form-group">
    <label for="body">â—†è¨˜äº‹æœ¬æ–‡</label>
    <textarea name="body" id="body editor" rows="30"><%= form.body %></textarea>
  </div>

  <!-- é€ä¿¡ãƒœã‚¿ãƒ³ -->
  <div class="form-send-button">
    <input type="submit" value="ä¿å­˜">
  </div>

</form>

<button class="deletebutton" onclick="articledelete()">å‰Šé™¤</button>
<form name="deletearticle" method="post" action="/manage/article/delete?id=<%=form.id%>"></form>

<div id="rt-menu-button"></div>

<script>
  // èª­ã¿è¾¼ã‚“ã è¨˜äº‹ãŒå…¬é–‹æ¸ˆã¿ãªã‚‰statusãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã«ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã‚‹
  if ("<%= form.status %>" === "release") {
    let el = document.getElementById('status_release');
    el.setAttribute("selected","selected");
  }

  // è¨˜äº‹å‰Šé™¤ã®ç¢ºèª
  function articledelete(){
    let judge = confirm("è¨˜äº‹ã‚’å‰Šé™¤ã—ã¦è‰¯ã„ã§ã™ã‹")
    if (judge == true){
      document.deletearticle.submit();

      // éåŒæœŸé€šä¿¡ã§POSTé€ä¿¡ã®ä¾‹----------------------------------------------
      // var xhr = new XMLHttpRequest();
      // console.log('ã¯ã„ãŒæŠ¼ã•ã‚Œã¾ã—ãŸ');
      // xhr.open('POST',"/manage/article/delete?id=" + <%=form.id%>);
      // console.log("/manage/article/delete?id=" + <%=form.id%>);
      // xhr.setRequestHeader('content-type', 'application/x-www-form-urlencoded');
      // xhr.send("string");

      // deleteå¾Œã«ç”»é¢é·ç§»ã™ã‚‹(éåŒæœŸé€šä¿¡ã ã¨Nodeã®routesã‹ã‚‰ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã§ããªã‹ã£ãŸ)
      // window.location.href = '/manage';
    }
  }
</script>